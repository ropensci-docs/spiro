<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Filter vectors and data frames with moving averages and digital filters.
Provides the data filtering for spiro_max and
spiro_plot."><title>Apply a smoothing filter to data from cardiopulmonary exercise testing. — spiro_smooth • spiro</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply a smoothing filter to data from cardiopulmonary exercise testing. — spiro_smooth"><meta property="og:description" content="Filter vectors and data frames with moving averages and digital filters.
Provides the data filtering for spiro_max and
spiro_plot."><meta property="og:image" content="https://docs.ropensci.org/spiro/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">spiro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/import_processing.html">Import &amp; Processing</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/summarizing_plotting.html">Summarizing &amp; Plotting</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="https://docs.ropensci.org/spiro/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Apply a smoothing filter to data from cardiopulmonary exercise testing.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/spiro/blob/HEAD/R/spiro_smooth.R" class="external-link"><code>R/spiro_smooth.R</code></a></small>
      <div class="d-none name"><code>spiro_smooth.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Filter vectors and data frames with moving averages and digital filters.
Provides the data filtering for <code><a href="spiro_max.html">spiro_max</a></code> and
<code><a href="spiro_plot.html">spiro_plot</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spiro_smooth</span><span class="op">(</span><span class="va">data</span>, smooth <span class="op">=</span> <span class="fl">30</span>, columns <span class="op">=</span> <span class="cn">NULL</span>, quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame of the class <code>spiro</code>. Usually the output of
the <code><a href="spiro.html">spiro</a> function</code>.</p></dd>


<dt>smooth</dt>
<dd><p>An integer or character string specifying the smoothing
strategy and parameters. Default is <code>30</code>, which means the applied
filter is a 30-second moving average. See the section
<strong>'Filtering Methods'</strong> for more details.</p></dd>


<dt>columns</dt>
<dd><p>A character vector of the data columns that should be
filtered. By default the filtering applies to all data column of
<code>data</code> (besides load, time and step).</p></dd>


<dt>quiet</dt>
<dd><p>Whether warning message should be suppressed. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data frame</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Raw data from cardiopulmonary is usually noisy due to measurement error and
biological breath-to-breath variability. When processing or visualizing the
gas exchange data, it is often helpful to filter the raw data. This function
provides different filtering methods (time average, breath average, digital
filters).</p>
<p>Breath-based and digital filters will be applied on the raw breath-by-breath
data. Time-based averages will be used on the interpolated data.</p>
    </div>
    <div class="section level2">
    <h2 id="filtering-methods">Filtering Methods<a class="anchor" aria-label="anchor" href="#filtering-methods"></a></h2>
    

<dl><dt>Time-Based Average (e.g. <code>smooth = 30</code>)</dt>
<dd><p>A (centered) moving
average over a defined time span. The number can be given as an integer
or as a character (e.g. <code>smooth = "30"</code>) and defines the length of
the calculation interval in seconds.</p></dd>

<dt>Breath-Based Average (e.g. <code>smooth = "15b"</code>)</dt>
<dd><p>A (centered)
moving average over a defined number of breaths. The integer before the
letter 'b' defines the number of breaths for the calculation interval.</p></dd>

<dt>Butterworth filter (e.g. <code>smooth = "0.04f3"</code>)</dt>
<dd><p>A digital
Butterworth filter (with lag). The number before the letter 'f' defines
the low-pass cut-off frequency, the number after the letter 'f' gives the
order of the filter. See <code><a href="bw_filter.html">bw_filter</a></code> for more details.</p></dd>

<dt>Zero-lag Butterworth filter (e.g. <code>smooth = "0.04fz3"</code>)</dt>
<dd><p>A
digital forwards-backwards Butterworth filter (without lag). The number
before the letter 'f' defines the low-pass cut-off frequency, the number
after gives the order of the filter. See <code><a href="bw_filter.html">bw_filter</a></code> for more
details.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Get example data</span></span></span>
<span class="r-in"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="spiro_example.html">spiro_example</a></span><span class="op">(</span><span class="st">"zan_gxt"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="spiro.html">spiro</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu">spiro_smooth</span><span class="op">(</span><span class="va">d</span>, <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   VO2 VCO2 RR VT VE HR PetO2 PetCO2 VO2_rel VCO2_rel RE RER CHO FO</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  NA   NA NA NA NA NA    NA     NA      NA       NA NA  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NA   NA NA NA NA NA    NA     NA      NA       NA NA  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NA   NA NA NA NA NA    NA     NA      NA       NA NA  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NA   NA NA NA NA NA    NA     NA      NA       NA NA  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NA   NA NA NA NA NA    NA     NA      NA       NA NA  NA  NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NA   NA NA NA NA NA    NA     NA      NA       NA NA  NA  NA NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># filter only the VO2 column with a zero-phase Butterworth filter</span></span></span>
<span class="r-in"><span><span class="va">out2</span> <span class="op">&lt;-</span> <span class="fu">spiro_smooth</span><span class="op">(</span><span class="va">d</span>, <span class="st">"0.04fz3"</span>, columns <span class="op">=</span> <span class="st">"VO2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">out2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        VO2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 398.2345</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 400.9441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 406.3668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 414.5101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 425.3846</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 439.0040</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

